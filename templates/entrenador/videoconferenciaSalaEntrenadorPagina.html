<!doctype html>
<html layout:decorate="~{plantillaEntrenador}">
  <head>
    <title>Videoconferencia</title>
    <meta charset="utf-8">
  </head>
  <body>
    
    <a layout:fragment="submenu-titulo">
		<span>Videoconferencia</span>
    </a>

  	<div layout:fragment="submenu-seccion-izquierda">
		<span th:text="|${videoconferencia.estado.nombre}.|"></span>
		<span th:if="${videoconferencia.fechaHoraProgramada}" th:text="|${#temporals.format(T(es.pocketrainer.util.FechaUtil).aClienteZoneId(videoconferencia.fechaHoraProgramada), 'dd/MM/yyyy HH:mm')}.|"></span>
    </div>
 
    <div layout:fragment="submenu-seccion-derecha">
    	<button id="iniciarVideoConferencia" class="iniciarVideoConferencia btn btn-sm btn-outline-azul" th:id-videoconferencia="${videoconferencia.id}" th:sala-videoconferencia="${videoconferencia.salaId}" th:participante-videoconferencia="${videoconferencia.entrenador.nombre}"><i class="fas fa-video"></i> Iniciar videoconferencia</button>
		<button class="btn btn-sm btn-outline-azul" data-toggle="modal" data-target="#suscripcionFinaliadaConfirmacionModal"><i class="fas fa-check"></i> Finalizada</button>
    </div>
    
  	<div layout:fragment="content" class="row">
  		<div class="container">
  			<div class="row">
  				
		  		<div class="col-12 col-lg-7 col-xl-8 mb-4 text-center">
		  			 <button class="iniciarVideoConferencia btn  btn-outline-azul" style="margin-top: 100px;" th:id-videoconferencia="${videoconferencia.id}" th:sala-videoconferencia="${videoconferencia.salaId}"  th:participante-videoconferencia="${videoconferencia.entrenador.nombre}"><i class="fas fa-video"></i> Iniciar videoconferencia</button>
					<div id="zonaVideoConferencia" class="embed-responsive embed-responsive-4by3">
					</div>
				</div>
				
				
				<div class="col-12 col-lg-5 col-xl-4">
					<div class="row">
						<div class="col-12 mb-2">
							<a href="#" th:if="${cliente.rutina1 != null}" th:rutina-id="${cliente.rutina1.id}" th:videoconferencia-id="${videoconferencia.id}" class="seleccion-rutina btn btn-sm btn-azul">Rutina 1</a>
							<a href="#" th:if="${cliente.rutina2 != null}" th:rutina-id="${cliente.rutina2.id}" th:videoconferencia-id="${videoconferencia.id}" class="seleccion-rutina btn btn-sm btn-azul">Rutina 2</a>
							<a href="#" th:if="${cliente.rutina3 != null}" th:rutina-id="${cliente.rutina3.id}" th:videoconferencia-id="${videoconferencia.id}" class="seleccion-rutina btn btn-sm btn-azul">Rutina 3</a>
							<a href="#" th:if="${cliente.rutina4 != null}" th:rutina-id="${cliente.rutina4.id}" th:videoconferencia-id="${videoconferencia.id}" class="seleccion-rutina btn btn-sm btn-azul">Rutina 4</a>
						</div>
						<div id="videoconferenciaRutinaZona" class="col-12">
							<div th:replace="cliente/videoconferenciaSalaClientePagina :: videoconferenciaRutinaFragment"/>
						</div>
					</div>
				</div>
				
				
			</div>
		</div>
		
		
		<!-- Modal confirmar finalizada bien -->
		<div class="modal fade" id="suscripcionFinaliadaConfirmacionModal" tabindex="-1" role="dialog" aria-labelledby="suscripcionFinaliadaConfirmacionModalLabel" aria-hidden="true">
		  <div class="modal-dialog modal-lg" role="document">
		    <div class="modal-content">
		      <div class="modal-header">
		        <h5 class="modal-title" id="suscripcionFinaliadaConfirmacionModalLabel">Videoconferencia finalizada</h5>
		        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
		          <span aria-hidden="true">&times;</span>
		        </button>
		      </div>
		      <div class="modal-body">
		      	Pulsa aceptar para confirmar que tú y el cliente llevásteis a cabo la videoconferencia de forma correcta.
		      </div>
		      <div class="modal-footer">
		        <button type="button" data-dismiss="modal" class="btn btn-outline-coral">Cancelar</button>
		        <a th:href="@{/videoconferenciaFinalizada/{videoconferenciaId}(videoconferenciaId=${videoconferencia.id})}" class="btn btn-outline-azul">Aceptar</a>
		      </div>
		    </div>
		  </div>
		</div>
		
	<script src='https://meet.jit.si/external_api.js'></script>
	<script src="/js/videoconferencia.js" th:src="@{/js/videoconferencia.js}"></script>
	<script src="/js/videoconferenciaSalaEntrenadorPagina.js" th:src="@{/js/videoconferenciaSalaEntrenadorPagina.js}"></script>

    </div>
    
    
    

	
  </body>
</html>